<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥æ™‚å›å ±ç³»çµ±</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f0f2f5; padding: 20px; display: flex; justify-content: center; }
        .card { background: white; width: 100%; max-width: 400px; border-radius: 20px; padding: 25px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #1a73e8; margin-bottom: 25px; }
        
        /* æ—¥å¤œç­åˆ‡æ›æŒ‰éˆ• */
        .shift-container { display: flex; gap: 15px; margin-bottom: 25px; }
        .shift-option { flex: 1; border: 2px solid #e0e0e0; border-radius: 15px; padding: 15px; text-align: center; cursor: pointer; transition: 0.3s; }
        .shift-option img { width: 50px; height: 50px; margin-bottom: 8px; }
        .shift-option.active { border-color: #00b900; background-color: #f0fff0; box-shadow: 0 4px 12px rgba(0,185,0,0.2); }
        .shift-label { font-weight: bold; font-size: 16px; color: #333; }

        /* æ™‚é–“é¸å–å™¨ (æ»¾è¼ªæ¨£å¼) */
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 500; color: #5f6368; }
        input[type="time"] { width: 100%; padding: 15px; border: 1px solid #dadce0; border-radius: 10px; font-size: 18px; color: #202124; appearance: none; -webkit-appearance: none; }

        /* é€å‡ºæŒ‰éˆ• */
        .submit-btn { width: 100%; background-color: #00b900; color: white; border: none; padding: 18px; border-radius: 12px; font-size: 18px; font-weight: bold; margin-top: 10px; cursor: pointer; transition: 0.3s; }
        .submit-btn:active { background-color: #008f00; transform: scale(0.98); }
    </style>
</head>
<body>
    <div class="card">
        <h2>ğŸ•’ å·¥æ™‚å¿«é€Ÿå›å ±</h2>
        
        <div class="shift-container">
            <div id="dayBtn" class="shift-option active" onclick="selectShift('D')">
                <img src="https://cdn-icons-png.flaticon.com/512/439/439842.png" alt="æ—¥ç­">
                <div class="shift-label">æ—¥ç­ â˜€ï¸</div>
            </div>
            <div id="nightBtn" class="shift-option" onclick="selectShift('N')">
                <img src="https://cdn-icons-png.flaticon.com/512/606/606807.png" alt="å¤œç­">
                <div class="shift-label">å¤œç­ ğŸŒ™</div>
            </div>
        </div>

        <div class="input-group">
            <label>ä¸Šç­æ™‚é–“ (æ»¾è¼ªé¸å–)</label>
            <input type="time" id="startTime" value="07:20">
        </div>
        <div class="input-group">
            <label>ä¼‘æ¯çµæŸ (æ»¾è¼ªé¸å–)</label>
            <input type="time" id="restTime" value="13:20">
        </div>
        <div class="input-group">
            <label>ä¸‹ç­æ™‚é–“ (æ»¾è¼ªé¸å–)</label>
            <input type="time" id="endTime" value="19:20">
        </div>

        <button class="submit-btn" onclick="submitWorkData()">ç¢ºèªé€å‡º</button>
    </div>

    <script>
        let currentShift = 'D';

        function selectShift(shift) {
            currentShift = shift;
            document.getElementById('dayBtn').classList.toggle('active', shift === 'D');
            document.getElementById('nightBtn').classList.toggle('active', shift === 'N');
        }

        // åˆå§‹åŒ– LIFF
        async function initializeLiff() {
            try {
                // è«‹åœ¨æ­¤è™•å¡«å…¥ä½ åœ¨ LINE Developers ç”³è«‹çš„ LIFF ID
                await liff.init({ liffId: "å¡«å…¥ä½ çš„_LIFF_ID" });
                if (!liff.isLoggedIn()) {
                    liff.login();
                }
            } catch (error) {
                console.error('LIFF åˆå§‹åŒ–å¤±æ•—', error);
            }
        }
        initializeLiff();

        // é€å‡ºæ•¸æ“š
        function submitWorkData() {
            const t1 = document.getElementById('startTime').value;
            const t2 = document.getElementById('restTime').value;
            const t3 = document.getElementById('endTime').value;
            
            // çµ„åˆå­—ä¸²ï¼šæ©Ÿå™¨äººæœƒè¾¨è­˜ "å·¥æ™‚" é–‹é ­çš„è¨Šæ¯
            const message = `å·¥æ™‚,${currentShift},${t1},${t2},${t3}`;
            
            liff.sendMessages([{
                type: 'text',
                text: message
            }]).then(() => {
                liff.closeWindow(); // å‚³é€å®Œç•¢è‡ªå‹•é—œé–‰è¦–çª—
            }).catch((err) => {
                console.error('è¨Šæ¯å‚³é€å¤±æ•—', err);
            });
        }
    </script>
</body>
</html>
